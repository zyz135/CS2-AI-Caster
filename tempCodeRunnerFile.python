from awpy import Demo
from config import DEMO_PATH
import pandas as pd

print(f"ğŸ” æ­£åœ¨æ‰«æ Grenades è¡¨: {DEMO_PATH}")

try:
    dem = Demo(DEMO_PATH, verbose=False)
    dem.parse()
    
    if hasattr(dem, 'grenades'):
        # å°è¯•è½¬æ¢ä¸º DataFrame
        attr = getattr(dem, 'grenades')
        df = attr.to_pandas() if hasattr(attr, "to_pandas") else pd.DataFrame(attr)
        
        print("\nâœ… [grenades] è¡¨çš„æ‰€æœ‰åˆ—å:")
        print(list(df.columns))
        
        # å¯»æ‰¾ç–‘ä¼¼ç»æµç›¸å…³çš„åˆ—
        keywords = ['money', 'cash', 'equip', 'val', 'acc', 'cost', 'price']
        match_cols = [c for c in df.columns if any(k in c.lower() for k in keywords)]
        
        if match_cols:
            print(f"\nğŸ’° å‘ç°ç–‘ä¼¼ç»æµåˆ—: {match_cols}")
            if not df.empty:
                print("ğŸ“Š æ•°æ®æ ·æœ¬ (ç¬¬ä¸€è¡Œ):")
                print(df[match_cols].iloc[0].to_dict())
        else:
            print("\nâŒ é—æ†¾ï¼Œ[grenades] è¡¨é‡Œä¹Ÿæ²¡æœ‰ç›´æ¥çš„é‡‘é’±æˆ–ä»·å€¼åˆ—ã€‚")
    else:
        print("âŒ Demo å¯¹è±¡ä¸­æ²¡æœ‰ grenades å±æ€§ã€‚")

except Exception as e:
    print(f"âŒ è¿è¡Œå‡ºé”™: {e}")