from awpy import Demo
import pandas as pd
import os

# æ›¿æ¢æˆä½ çš„ Demo è·¯å¾„
DEMO_PATH = r"D:\uncompressed\starladder-budapest-major-2025-spirit-vs-vitality-bo3-IF7bXBRmDsHvo9kSCXua2Z\spirit-vs-vitality-m1-mirage.dem"

def check():
    print(f"ğŸ” æ­£åœ¨æ£€æŸ¥ Demo: {os.path.basename(DEMO_PATH)}")
    try:
        dem = Demo(DEMO_PATH)
        dem.parse()
        
        print(f"\nâœ… Tickrate: {dem.tickrate}")
        
        # 1. æ£€æŸ¥ Rounds (ç”¨äºæ—¶é—´å¯¹é½)
        if hasattr(dem, 'rounds'):
            rounds = dem.rounds
            if not isinstance(rounds, pd.DataFrame): rounds = rounds.to_pandas()
            print(f"\n[Rounds åˆ—å]:\n{list(rounds.columns)}")
            # æ‰“å°ç¬¬ä¸€è¡Œçœ‹çœ‹å®é™…æ•°æ®
            if not rounds.empty:
                print(f"[Rounds ç¬¬ä¸€è¡Œç¤ºä¾‹]:\n{rounds.iloc[0].to_dict()}")

        # 2. æ£€æŸ¥ Smokes (ç”¨äºé“å…·)
        if hasattr(dem, 'smokes'):
            smokes = dem.smokes
            if not isinstance(smokes, pd.DataFrame): smokes = smokes.to_pandas()
            print(f"\n[Smokes åˆ—å]:\n{list(smokes.columns)}")
            if not smokes.empty:
                print(f"[Smokes ç¬¬ä¸€è¡Œç¤ºä¾‹]:\n{smokes.iloc[0].to_dict()}")
        
        # 3. æ£€æŸ¥ Kills
        if hasattr(dem, 'kills'):
            kills = dem.kills
            if not isinstance(kills, pd.DataFrame): kills = kills.to_pandas()
            print(f"\n[Kills åˆ—å]:\n{list(kills.columns)}")

    except Exception as e:
        print(f"âŒ è¯»å–å‡ºé”™: {e}")

if __name__ == "__main__":
    check()